---
title: React é¡¹ç›®å›½é™…åŒ–å®è·µï¼šå‰åç«¯æ··åˆå¤šè¯­è¨€æ–¹æ¡ˆè½åœ°
slug: å¤šè¯­è¨€
summary: 'ä½¿ç”¨ react-i18next å®ç°å‰ç«¯å›½é™…åŒ– æŠ€æœ¯å®è·µ'
date: '2025-06-05'
featured_image_url: /blogs/i18next/cover.webp
tags:
  - å›½é™…åŒ–
  - react-i18next
---


## ğŸŒ å‰åç«¯æ··åˆå¤šè¯­è¨€æ–¹æ¡ˆ

åœ¨ä¸­å¤§å‹å¤šè¯­è¨€ç³»ç»Ÿä¸­ï¼Œç®€å•çš„å‰ç«¯è¯­è¨€åŒ…å¾€å¾€æ— æ³•æ»¡è¶³æ‰€æœ‰åœºæ™¯ï¼Œè€Œåç«¯å…¨æ‰˜ç®¡åˆå®¹æ˜“å¸¦æ¥ç»´æŠ¤å¤æ‚åº¦ã€‚
æœ¬ç¯‡æ–‡ç« ä»‹ç»ä¸€ç§æ›´å…·å®ç”¨æ€§çš„ å‰åç«¯æ··åˆå›½é™…åŒ–ç­–ç•¥ï¼ŒåŸºäº `react-i18next` å®ç°çµæ´»è€Œå¼ºå¤§çš„å›½é™…åŒ–æ”¯æŒã€‚

ğŸ’¡ ä¸ºä»€ä¹ˆé‡‡ç”¨æ··åˆæ–¹æ¡ˆï¼Ÿ

| ç±»åˆ« | ç¤ºä¾‹ | æ¥æº | è¯´æ˜ | 
| --- | --- | --- | --- | 
| ğŸ“ `UI å›ºå®šæ–‡æ¡ˆ` |  æŒ‰é’®ã€èœå•ã€æç¤º | å‰ç«¯é™æ€è¯­è¨€åŒ…  |  é¡¹ç›®åˆå§‹åŒ–æ—¶åŠ è½½  | 
| ğŸ“‰ `ä¸šåŠ¡æ•°æ®æ–‡æ¡ˆ`| ä¸šåŠ¡å†…å®¹ | æ¥å£è¿”å›è¯­è¨€å­—æ®µ  |  åç«¯æ ¹æ®è¯­è¨€è¿”å›  | 



## ğŸ—ï¸ é¡¹ç›®ç»“æ„ä¸æ–‡ä»¶è¯´æ˜


```bash
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ locales
â”‚   â”‚   â”œâ”€â”€ i18n.ts
â”‚   â”‚   â”œâ”€â”€ lang
â”‚   â”‚   â”‚   â”œâ”€â”€ en_US
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ common.json        # é€šç”¨çº§åˆ«
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ sys.json           # ç³»ç»Ÿçº§åˆ«
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ product.json       # å•†å“æ¨¡å—
â”‚   â”‚   â”‚   â””â”€â”€ zh_CN
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ common.json        # é€šç”¨çº§åˆ«
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ sys.json           # ç³»ç»Ÿçº§åˆ«
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ product.json       # å•†å“æ¨¡å—
â”‚   â”‚   â””â”€â”€ useLocale.ts
â”‚   â””â”€â”€ index.tsx
```


## ğŸ§© åˆå§‹åŒ–é…ç½® i18n.ts

```tsx
import i18n from 'i18next';
import LanguageDetector from 'i18next-browser-languagedetector';
import { initReactI18next } from 'react-i18next';

import { getStringItem } from '@/utils/storage';

import en_US from './lang/en_US';
import zh_CN from './lang/zh_CN';

import { LocalEnum, StorageEnum } from '#/enum';

const defaultLng = getStringItem(StorageEnum.I18N) || (LocalEnum.zh_CN as string);
i18n
    .use(LanguageDetector)
    .use(initReactI18next)
    .init({
        debug: true,
        lng: defaultLng, // localstorage -> i18nextLng: en_US
        fallbackLng: LocalEnum.zh_CN,
        interpolation: {
            escapeValue: false, // not needed for react as it escapes by default
        },
        resources: {
            en_US: { translation: en_US },
            zh_CN: { translation: zh_CN },
        },
    });

export default i18n;
export const { t } = i18n;
```

åœ¨é¡¹ç›®å…¥å£æ–‡ä»¶ Eg: `index.tsx` æ–‡ä»¶å¼•å…¥

```tsx
// i18n
import './locales/i18n';

createRoot(document.getElementById('root')!).render(
    <App />,
);
```

åˆ‡æ¢è¯­è¨€çš„ hooks

```tsx
export default function useLocale() {
    const { i18n } = useTranslation();
    const setLocale = (locale: Locale) => {
        i18n.changeLanguage(locale);
    };
    const locale = (i18n.resolvedLanguage || LocalEnum.en_US) as Locale;
    const language = LANGUAGE_MAP[locale];

    return {
        locale,
        language,
        setLocale,
    };
}

```

 ä½¿ç”¨å‰ç«¯æ–‡æ¡ˆ

```tsx
export default function AccountDropdown() {
  const { t } = useTranslation();
    return (
        <div>{t('common.okText')}</div>
    )
}
```


ä½¿ç”¨åç«¯è¯­è¨€å­—æ®µ

```tsx
{
  "name": {
    "zh_CN": "å¤æ—¥ç‰¹é¥®",
    "en_US": "Summer Drinks"
  }
}

const lang = i18n.language; // è·å–å½“å‰è¯­è¨€
const name = data.name[lang];
```

## ğŸ“¦ æŒ‰æ¨¡å—æ‹†åˆ†è¯­è¨€åŒ…

```tsx
import common from './common.json';
import sys from './sys.json';

export default {
    common,
    index,
    sys,
    product,
};

```

> åŸåˆ™: å°è€Œç¾ã€æ¨¡å—ç‹¬ç«‹ã€è¯­ä¹‰æ¸…æ™°ã€é›†ä¸­ç®¡ç†

- ä¸šåŠ¡æ–‡æ¡ˆæ¨¡å—åŒ–ï¼ˆå¯ç»´æŠ¤ï¼‰
- key å‘½åè§„èŒƒåŒ–ï¼ˆå¯è¯»æ€§å¼ºï¼‰

1. ç³»ç»Ÿçº§åˆ«çš„: æƒé™ä¸è®¤è¯ç›¸å…³ã€é”™è¯¯æç¤ºå’ŒçŠ¶æ€åé¦ˆç­‰æ”¾åœ¨ ç³»ç»Ÿçº§åˆ«æ–‡ä»¶ `sys` ä¸­
2. ç»Ÿä¸€çº§åˆ«çš„: æ”¾åœ¨ `common.json` ä¸­çš„æ–‡æ¡ˆåŒ…æ‹¬ï¼š`æŒ‰é’®`ã€`çŠ¶æ€å€¼`ã€`ç©ºçŠ¶æ€`ã€`loading`ã€`ç¡®è®¤æ¡†`ç­‰ã€‚
3. ä¸šåŠ¡çº§åˆ«: æ”¾åœ¨å¯¹åº”çš„ä¸šåŠ¡æ¨¡å—ä¸‹é¢ Eg: `product` ç­‰ç­‰

ğŸ“„ ä¸¾ä¸ªä¾‹å­

```json
{
    "common": {
        "okText": "OK",
    }
}
```

## âš™ï¸ è¯­è¨€åŒ…ä½“ç§¯å¤§æ—¶çš„ä¼˜åŒ–æ–¹æ¡ˆï¼šCDN + å‘½åç©ºé—´æŒ‰éœ€åŠ è½½

æŠ€æœ¯ç­–ç•¥ï¼š

1. é™æ€è¯­è¨€åŒ…æ”¾ CDN
å°†å„è¯­è¨€ä¸‹çš„å„å‘½åç©ºé—´çš„ .json æ–‡ä»¶æ”¾åœ¨ CDN ä¸Šï¼Œä¾‹å¦‚ï¼š

```txt
https://cdn.example.com/i18n/zh_CN/common.json
https://cdn.example.com/i18n/zh_CN/sys.json
https://cdn.example.com/i18n/en_US/common.json
```

ä¼˜åŠ¿æ€»ç»“

- ğŸ“¦ é™ä½ä¸»åŒ…ä½“ç§¯ï¼ˆè¯­è¨€åŒ…ç‹¬ç«‹åŠ è½½ï¼‰
- â˜ï¸ é™æ€èµ„æºéƒ¨ç½²çµæ´»ï¼ˆCDN åŠ é€Ÿå…¨çƒè®¿é—®ï¼‰

2. é…ç½® i18next çš„ backend æ’ä»¶
ä½¿ç”¨ `i18next-http-backend` æ”¯æŒæŒ‰éœ€åŠ è½½å‘½åç©ºé—´ï¼š


```tsx
import i18n from 'i18next';
import Backend from 'i18next-http-backend';
import { initReactI18next } from 'react-i18next';

i18n
  .use(Backend)
  .use(initReactI18next)
  .init({
    lng: 'zh_CN',
    fallbackLng: 'zh_CN',
    ns: ['common'], // åˆå§‹åŒ–åŠ è½½çš„å‘½åç©ºé—´
    defaultNS: 'common',
    backend: {
      loadPath: 'https://cdn.example.com/i18n/{{lng}}/{{ns}}.json',
    },
    interpolation: {
      escapeValue: false,
    },
  });
```

å¦‚ä½•ä½¿ç”¨

```tsx
const { t, ready } = useTranslation('sys');

if (!ready) return <Loading />;
return <div>{t('sys.login.title')}</div>;
```


å·¥ä½œåŸç†è§£æï¼š

{{lng}}ï¼šè¯­è¨€ ç”± i18n.language å†³å®šï¼Œä¾‹å¦‚ 'zh_CN' æˆ– 'en_US'

{{ns}}ï¼šå‘½åç©ºé—´ ç”± useTranslation('sys') æˆ– i18n.loadNamespaces(['sys']) ç­‰ä»£ç ä¸­ä¼ å…¥çš„å‘½åç©ºé—´å†³å®šã€‚

